"use strict";const o=require("../../common/vendor.js");if(!Array){(o.resolveComponent("uni-forms-item")+o.resolveComponent("uni-forms"))()}Math||((()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const e={__name:"join-home",setup(e){const n=o.reactive({homeId:"",password:""}),{globalData:{openId:t}}=new getApp,r=()=>{const e=n.homeId.trim(),r=n.password.trim();if(""===e)return void o.index.showToast({title:"房间号不能为空",duration:1e3,icon:"error"});if(6!==e.length)return void o.index.showToast({title:"房间号为6位",duration:1e3,icon:"error"});if(""===r)return void o.index.showToast({title:"密码不能为空",duration:1e3,icon:"error"});if(r.length<3||r.length>5)return void o.index.showToast({title:"密码应为 3 到 5 个数字",duration:1e3,icon:"error"});/[^\d]/g.test(r)?o.index.showToast({title:"密码只能是数字",duration:1e3,icon:"error"}):o.index.request({url:"https://wx.zyandwqy.top/user/join",method:"POST",data:{password:n.password,homeId:n.homeId,openId:t},success:n=>{if(200!==n.data.code)o.index.showToast({title:n.data.msg,duration:1e3,icon:"error"});else{console.log(n);const t=[];for(const o in n.data.map)console.log(o),t.push(n.data.map[o]);console.log(t),o.index.setStorageSync("homePersonnelInfo",t),o.index.navigateTo({url:`/pages/join/join?homeId=${e}&Homeowner=`})}},fail:()=>{}})};return(e,t)=>({a:n.homeId,b:o.o((o=>n.homeId=o.detail.value)),c:o.p({label:"房间号",name:"homeId"}),d:n.password,e:o.o((o=>n.password=o.detail.value)),f:o.p({label:"密码",name:"password"}),g:o.p({modelValue:n}),h:o.o(r)})}},n=o._export_sfc(e,[["__scopeId","data-v-8af3615b"]]);wx.createPage(n);
